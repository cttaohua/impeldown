{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 320100c651945064a20d","webpack:///./src/index.js","webpack:///./index.js","webpack:///./src/name.js"],"names":["ImpelDown","constructor","params","Error","url","createXML","e","console","error","resource_url","req","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","filename","name","intitle","response","window","chrome","link","document","createElement","href","URL","createObjectURL","download","click","navigator","msSaveBlob","blob","Blob","type","file","File","send","addEventListener","onStart","bind","onProgress","onAbort","onSuccess","onComplete","evt","lengthComputable","percentComplete","loaded","total","onError","impeldown","module","exports","require","default","getRandomStr","n","res","chars","i","id","Math","ceil","random","lastSlash","lastIndexOf","lastStr","slice","length","indexOf","split"],"mappings":"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","file":"impeldown.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 320100c651945064a20d","import { intitle } from './name.js'\nclass ImpelDown {\n  constructor (params) {\n    try {\n      if (!params) {\n        throw new Error('No parameters！')\n      }\n      if (typeof params === 'string') {\n        this.params = {\n          url: params\n        }\n        this.createXML()\n      } else if (typeof params === 'object') {\n        if (!params.url) {\n          throw new Error('The url is a required parameter！')\n        }\n        this.params = params\n        this.createXML()\n      } else {\n        throw new Error('The argument is expected to be in the format of a string or object！')\n      }\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  createXML () {\n    let resource_url = this.params.url\n    let req = new XMLHttpRequest()\n    req.open(\"GET\", resource_url, true)\n    req.responseType = 'blob'\n    req.onreadystatechange = () => {\n      if (req.readyState === 4 && req.status === 200) {\n        let filename = ''\n        if (this.params.name) {\n          filename = this.params.name\n        } else {\n          filename = intitle(this.params.url, req.response)\n        }\n        if (typeof window.chrome !== 'undefined') {  // Chrome version\n          let link = document.createElement('a')\n          link.href = window.URL.createObjectURL(req.response)\n          link.download = filename\n          link.click()\n        } else if (typeof window.navigator.msSaveBlob !== 'undefined') {  // IE version\n          let blob = new Blob([req.response], { type: 'application/force-download' })\n          window.navigator.msSaveBlob(blob, filename)\n        } else {  // Firefox version\n          let file = new File([req.response], filename, { type: 'application/force-download' });\n          window.open(URL.createObjectURL(file));\n        }\n      }\n    }\n\n    req.send(null)\n\n    req.addEventListener('loadstart',this.onStart.bind(this), false)\n    req.addEventListener('progress',this.onProgress.bind(this), false)\n    req.addEventListener('abort',this.onAbort.bind(this), false)\n    req.addEventListener('load',this.onSuccess.bind(this), false)\n    req.addEventListener('loadend',this.onComplete.bind(this), false)\n\n  }\n  // 开始下载\n  onStart () {\n    this.params.onStart ? this.params.onStart() : null\n  }\n  // 监听进度\n  onProgress (evt) {\n    if (this.params.onProgress) {\n      if (evt.lengthComputable) {\n        let percentComplete = evt.loaded / evt.total\n        this.params.onProgress(percentComplete)\n      }\n    }\n  }\n  // 被用户中止下载\n  onAbort () {\n    this.params.onAbort ? this.params.onAbort() : null\n  }\n  // 传输中出现错误\n  onError () {\n    this.params.onError ? this.params.onError() : null\n  }\n  // 下载成功\n  onSuccess () {\n    this.params.onSuccess ? this.params.onSuccess() : null\n    this.params.onProgress(1)  // 结束之后再次调用进度方法\n  }\n  // 下载结束 （成功失败都会调用）\n  onComplete () {\n    this.params.onComplete ? this.params.onComplete() : null\n  }\n}\n\nwindow.impeldown = ImpelDown;\n\nexport default ImpelDown\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require('./src/index');\nexports.default = require('./src/index');\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","//获取n位的数字字母的字符串\nfunction getRandomStr(n) {\n\tvar n = n || 12; //默认12位\n\tvar res = '';\n\tvar chars = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];\n\tfor(var i = 0; i < n ; i ++) {\n\t\tvar id = Math.ceil(Math.random()*35);\n\t\tres += chars[id];\n\t}\n\treturn res;\n}\n\n// 文件名获取\nexport function intitle (url, response) {\n  let lastSlash = url.lastIndexOf('/') + 1,\n      lastStr = url.slice(lastSlash, url.length)\n  if (lastStr.indexOf('.') != -1) {  // 可以查询到文件名\n    return lastStr\n  } else {  // 无法查询到文件名\n    let type = response.type.split('/')[1]\n    return getRandomStr(8) + '.' + type\n  }\n}\n\nexport default {\n  getRandomStr,\n  intitle\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/name.js"],"sourceRoot":""}